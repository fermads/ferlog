<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>


<script src="/logway.js"
  data-logway-debug="true"
  data-logway-prefix="scoreboard.client"></script>
<script src="/logway.perf.js"></script>
<script src="/logway.weblog.js"></script>
<script src="/logway.timer.js"></script>
<script src="/logway.abtest.js"></script>
<script>
/* global Logway */

function runTests() {
  testAdd();
  testPut();
  testStats();
  testLog();
  testABTest();
  stressAdd();
  stressPut();
  stressStats();
}

function rand(i) {
  i = i || 100;
  return Math.round(Math.random() * i);
}

function testAdd() {
  Logway.count('test.count', 2);
  Logway.count('test.count', 4);
}

function testPut() {
  Logway.count('test.countreset', 4, true);
  Logway.count('test.countreset', 6, true);

}

function testStats() {
  Logway.stats('test.stats', 10);
  Logway.stats('test.stats', 20);
}

function testLog() {
  Logway.write('INFO teste legal lalala');
  Logway.write('ERROR outro teste de log');
}

function stressAdd() {
  setTimeout(function() {
    for(var i = 0; i<100;i++) {
      Logway.count('stress.count', rand());
    }
  }, 2000);
}

function stressPut() {
  setTimeout(function() {
    for(var i = 0; i<100;i++) {
      Logway.count('stress.countreset', rand());
    }
  }, 4000);
}

function stressStats() {
  setTimeout(function() {
    for(var i = 0; i<100;i++) {
      Logway.stats('stress.stats', rand());
    }
  }, 6000);
}

function error() {
  console.write(bla);
}

function testABTest() {
  var t = new Logway.ABTest('abtest.botao')
  t.add('rosa', 25)
  t.add('verde', 50, function() {
    console.log('aeeeeeeeeeeee')
  })
  t.add('preto', 25)
  t.start()
  setTimeout(function() {
    t.end()
  }, 2000)
}

</script>

<a href="javascript:runTests()">Run some tests</a>
<a href="javascript:error()">Force error</a>
</body>
</html>